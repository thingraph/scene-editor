/**
    * @x-viewer/ui v0.8.0 build Mon Nov 03 2025
    * undefined
    * Copyright 2025 x-viewer
    * @license MIT
    */
import { THREE } from '@x-viewer/core';

function styleInject(_0x22f213,_0x5c149f){if(_0x5c149f===void 0x0)_0x5c149f={};var _0x3a9a22=_0x5c149f['insertAt'];if(!_0x22f213||typeof document==='undefined')return;var _0x4b556e=document['head']||document['getElementsByTagName']('head')[0x0],_0x51829f=document['createElement']('style');_0x51829f['type']='text/css',_0x3a9a22==='top'?_0x4b556e['firstChild']?_0x4b556e['insertBefore'](_0x51829f,_0x4b556e['firstChild']):_0x4b556e['appendChild'](_0x51829f):_0x4b556e['appendChild'](_0x51829f),_0x51829f['styleSheet']?_0x51829f['styleSheet']['cssText']=_0x22f213:_0x51829f['appendChild'](document['createTextNode'](_0x22f213));}

var css_248z$2 = ".base-panel{background-color:hsla(0,0%,100%,.9);border-radius:4px;box-shadow:1px 3px 10px 0 rgba(0,0,0,.4);color:#000;height:350px;max-height:90%;max-width:50%;min-height:40px;min-width:200px;overflow:hidden;position:absolute;resize:both;right:20px;top:30px;user-select:none;width:330px;z-index:2}.base-panel ::-webkit-scrollbar{width:6px}.base-panel ::-webkit-scrollbar-track{background:#e1e1e1;border-radius:1px}.base-panel ::-webkit-scrollbar-thumb{background:#888;border-radius:1px}.base-panel ::-webkit-scrollbar-thumb:hover{background:#555}.base-panel:hover{background-color:hsla(0,0%,100%,.95)}.base-panel input{background-color:#fff;border:1px solid #d9d9d9;box-shadow:0 2px 0 rgba(0,0,0,.02);color:rgba(0,0,0,.88);height:auto;padding:0 2px;transition:all .2s cubic-bezier(.645,.045,.355,1)}.base-panel input:hover{border-color:#4096ff;color:#4096ff}.base-panel input[type=button]{cursor:pointer;height:auto;padding:1px 10px;text-align:center;user-select:none;white-space:nowrap}.base-panel input[type=button]:hover{border-color:#4096ff;color:#4096ff;z-index:2}.base-panel input[type=text]{padding:0 2px}.base-panel input[type=color]{background-color:transparent;border:0;height:16px;overflow:hidden;padding:0;width:30px}.base-panel select{background-color:#fff;border:1px solid #d9d9d9;box-shadow:0 2px 0 rgba(0,0,0,.02);color:rgba(0,0,0,.88);cursor:pointer;height:auto;padding:1px 10px;text-align:center;transition:all .2s cubic-bezier(.645,.045,.355,1);user-select:none;white-space:nowrap}.base-panel select:hover{border-color:#4096ff;color:#4096ff;z-index:2}.base-panel ::-webkit-color-swatch{height:16px;margin-top:-5px;position:relative;width:40px}.base-panel .header{align-items:center;background-color:rgba(0,0,0,.133);border-bottom:1px solid #ccc;cursor:move;display:flex;font-size:16px;height:40px;padding-left:12px;width:100%}.base-panel .header .expander{cursor:pointer;font-family:cursive;opacity:.7;padding:10px;position:absolute;right:40px;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);transition:transform .05s ease;-moz-transition:transform .05s ease;-webkit-transition:transform .05s ease;vertical-align:middle}.base-panel .header .expander:hover{opacity:1}.base-panel .header .expander-collapsed{transform:rotate(90deg);-webkit-transform:rotate(90deg)}.base-panel .header .close{cursor:pointer;opacity:.7;padding:10px;position:absolute;right:8px}.base-panel .header .close:hover{opacity:1}.base-panel .content{height:calc(100% - 40px);overflow-x:hidden;overflow-y:auto;padding:5px}.base-panel .content .color-input{border:1px solid gray;cursor:pointer;font-size:0;height:20px;width:20px}.base-panel .content .color-input:hover{border:1px solid blue}";
styleInject(css_248z$2);

var css_248z$1 = ".pop-panel{background:#fff;border-radius:4px;box-shadow:0 12px 48px 16px rgba(0,0,0,.03),0 9px 28px 0 rgba(0,0,0,.05),0 6px 16px -8px rgba(0,0,0,.08);color:#333;left:calc(90% - 160px);position:absolute;top:calc(70% - 100px);width:160px;z-index:99999999}.pop-panel .pop-panel-header{border-bottom:1px solid #efefef;color:#333;cursor:move;font-size:16px;font-weight:bolder;padding:16px 24px 8px;user-select:none}.pop-panel .pop-panel-body{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:16px 24px}.pop-panel .pop-panel-body .pop-panel-item{cursor:pointer;display:inline-block;font-size:16px;margin-right:16px}.pop-panel .pop-panel-body .pop-panel-item .x-viewer-iconfont{font-size:24px}.pop-panel .pop-panel-body .pop-panel-item:last-child{margin-right:0}.pop-panel .pop-panel-body .pop-panel-item.active,.pop-panel .pop-panel-body .pop-panel-item:hover{color:#2c7be5}.pop-panel .pop-panel-body .pop-panel-item.disable{color:#999;cursor:not-allowed}";
styleInject(css_248z$1);

class BasePanel{constructor(_0x4eb74a){this['mouseDownPositionX']=-0x1,this['mouseDownPositionY']=-0x1,this['originalPanelHeight']=-0x1,this['onHide']=()=>{var _0x574a53;this['setVisible'](![]),(_0x574a53=this['onClose'])===null||_0x574a53===void 0x0?void 0x0:_0x574a53['call'](this);},this['onPointerDown']=_0x33136b=>{_0x33136b['target']['classList']['contains']('draggable')&&_0x33136b['button']===0x0&&(this['mouseDownPositionX']=_0x33136b['x'],this['mouseDownPositionY']=_0x33136b['y'],document['addEventListener']('pointermove',this['onPointerMove']),document['addEventListener']('pointerup',this['onPointerUp']));},this['onPointerMove']=_0x2bb7f8=>{const _0x14e98e=this['root'],_0x50d127=_0x2bb7f8['x']-this['mouseDownPositionX'],_0x40fa31=_0x2bb7f8['y']-this['mouseDownPositionY'],_0x24d062=this['getPanelTransform']();let _0x4c3d48=_0x14e98e['offsetLeft']+_0x24d062['x']+_0x50d127,_0x2544ee=_0x14e98e['offsetTop']+_0x24d062['y']+_0x40fa31;const _0x34673b=this['viewportContainer'];if(_0x34673b){const _0x2faadc=_0x34673b['clientLeft']+_0x34673b['clientWidth'],_0xd7522f=_0x34673b['clientTop']+_0x34673b['clientHeight'];_0x4c3d48<0x0&&(_0x4c3d48=0x0),_0x4c3d48>0x0&&_0x4c3d48+_0x14e98e['clientWidth']>_0x2faadc&&(_0x50d127>0x0&&(_0x4c3d48=_0x14e98e['offsetLeft']+_0x24d062['x'])),_0x2544ee<0x0&&(_0x2544ee=0x0),_0x2544ee>0x0&&_0x2544ee+_0x14e98e['clientHeight']>_0xd7522f&&(_0x40fa31>0x0&&(_0x2544ee=_0x14e98e['offsetTop']+_0x24d062['y']));}_0x14e98e['style']['left']=_0x4c3d48-_0x24d062['x']+'px',_0x14e98e['style']['top']=_0x2544ee-_0x24d062['y']+'px',this['mouseDownPositionX']=_0x2bb7f8['x'],this['mouseDownPositionY']=_0x2bb7f8['y'];},this['onPointerUp']=()=>{document['removeEventListener']('pointermove',this['onPointerMove']),document['removeEventListener']('pointerup',this['onPointerUp']);};const {container:_0x3fcc4f,title:_0x16c253,cssClass:_0x231a5d,onClose:_0x135533,viewportContainer:_0x1978d9}=_0x4eb74a;this['root']=document['createElement']('div'),this['root']['classList']['add']('base-panel');_0x231a5d&&this['root']['classList']['add'](_0x231a5d);this['header']=document['createElement']('div'),this['header']['classList']['add']('header','draggable');const _0x21205a=document['createElement']('span');_0x21205a['innerText']=_0x16c253,_0x21205a['classList']['add']('draggable'),this['closeBtn']=document['createElement']('span'),this['closeBtn']['classList']['add']('close'),this['closeBtn']['innerHTML']='âœ•',this['collapseBtn']=document['createElement']('span'),this['collapseBtn']['classList']['add']('expander'),this['collapseBtn']['innerHTML']='>',this['header']['appendChild'](_0x21205a),this['header']['appendChild'](this['collapseBtn']),this['header']['appendChild'](this['closeBtn']),this['root']['appendChild'](this['header']),this['content']=document['createElement']('div'),this['content']['classList']['add']('content'),this['root']['appendChild'](this['content']),_0x3fcc4f['appendChild'](this['root']),this['header']['addEventListener']('pointerdown',this['onPointerDown']),this['collapseBtn']['addEventListener']('click',_0x37f47b=>{_0x37f47b['stopPropagation']();const _0x17d1ad=this['originalPanelHeight']>0x0;_0x17d1ad?(this['collapseBtn']['classList']['remove']('expander-collapsed'),this['root']['style']['height']=this['originalPanelHeight']+'px',this['originalPanelHeight']=-0x1):(this['collapseBtn']['classList']['add']('expander-collapsed'),this['originalPanelHeight']=this['root']['clientHeight'],this['root']['style']['height']='0px');}),this['closeBtn']['addEventListener']('click',this['onHide']),_0x135533&&(this['onClose']=_0x135533),_0x1978d9&&(this['viewportContainer']=_0x1978d9);}['setVisible'](_0x2150fb){this['root']['style']['display']=_0x2150fb?'':'none';}['isVisible'](){return this['root']['style']['display']!=='none';}['setTitle'](_0x16b375){this['header']['querySelector']('span.draggable')['innerText']=_0x16b375;}['setContent'](_0x2742c9){this['content']['innerHTML']=_0x2742c9;}['destroy'](){this['header']['removeEventListener']('pointerdown',this['onPointerDown']),this['closeBtn']['removeEventListener']('click',this['onHide']);}['getPanelTransform'](){const _0x501391=window['getComputedStyle'](this['root']);let _0x28366c=0x0,_0xf294c7=0x0;const _0x2865df=_0x501391['transform'];if(_0x2865df&&_0x2865df['startsWith']('matrix')){const _0x3595e2=_0x2865df['match'](/matrix\([^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+)\)/);_0x3595e2&&(_0x28366c=parseFloat(_0x3595e2[0x5]),_0xf294c7=parseFloat(_0x3595e2[0x6]));}else {if(_0x2865df&&_0x2865df['startsWith']('translate')){const _0x515462=_0x2865df['match'](/translate\(([\d\.\-]+)px,\s*([\d\.\-]+)px\)/);_0x515462&&(_0x28366c=parseFloat(_0x515462[0x1]),_0xf294c7=parseFloat(_0x515462[0x2]));}}return new THREE['Vector2'](_0x28366c,_0xf294c7);}}

class PopPanel{constructor(_0x2f65bf,_0x20f414,_0x424e36=document['body']){this['container']=_0x424e36,this['isFollowing']=![],this['diffX']=0x0,this['diffY']=0x0,this['start']=_0x21e027=>{this['isFollowing']=!![],this['diffX']=_0x21e027['clientX']-this['element']['offsetLeft'],this['diffY']=_0x21e027['clientY']-this['element']['offsetTop'];},this['stop']=()=>{this['isFollowing']=![];},this['follow']=_0x2b5d4e=>{if(!this['isFollowing'])return;const _0x24721f=_0x2b5d4e['clientX']-this['diffX'],_0x3d4f1e=_0x2b5d4e['clientY']-this['diffY'];this['element']['style']['left']=_0x24721f+'px',this['element']['style']['top']=_0x3d4f1e+'px';},this['element']=document['createElement']('div'),this['element']['id']=_0x2f65bf,this['element']['classList']['add']('pop-panel');const _0x328bbb=document['createElement']('div');_0x328bbb['classList']['add']('pop-panel-header'),_0x328bbb['append'](_0x20f414),this['element']['appendChild'](_0x328bbb),this['header']=_0x328bbb;const _0x575bd9=document['createElement']('div');_0x575bd9['classList']['add']('pop-panel-body'),this['element']['appendChild'](_0x575bd9),this['body']=_0x575bd9,_0x328bbb['addEventListener']('mousedown',this['start']),_0x328bbb['addEventListener']('mouseup',this['stop']),document['body']['addEventListener']('mousemove',this['follow']),this['container']['appendChild'](this['element']);}['destroy'](){document['body']['removeEventListener']('mousemove',this['follow']),this['element']['removeEventListener']('mousedown',this['start']),this['element']['removeEventListener']('mouseup',this['stop']),this['element']['remove']();}}

var css_248z = ".follow-tooltip{background:rgba(25,25,25,.3);border-radius:2px;color:hsla(0,0%,100%,.8);font-size:12px;left:-500px;padding:6px;position:absolute;z-index:99999999}";
styleInject(css_248z);

class Tooltip{constructor(_0xf34c7f,_0x1cd467,_0x99ec76){this['follow']=_0x3cc891=>{this['node']['style']['left']=_0x3cc891['offsetX']+0xf+'px',this['node']['style']['top']=_0x3cc891['offsetY']-0x1e+'px';},this['show']=()=>this['node']['hasAttribute']('hidden')&&this['node']['removeAttribute']('hidden'),this['hide']=()=>!this['node']['hasAttribute']('hidden')&&this['node']['setAttribute']('hidden',''),this['destroy']=()=>{this['target']?this['target']['removeEventListener']('mousemove',this['follow']):document['removeEventListener']('mousemove',this['follow']),this['parentNode']['removeChild'](this['node']);},this['node']=document['createElement']('div'),this['node']['id']=_0xf34c7f,_0x1cd467&&this['node']['append'](_0x1cd467),this['childNode']=document['createElement']('div'),this['target']=_0x99ec76===null||_0x99ec76===void 0x0?void 0x0:_0x99ec76['target'],this['parentNode']=(_0x99ec76===null||_0x99ec76===void 0x0?void 0x0:_0x99ec76['parentNode'])||document['body'],(_0x99ec76===null||_0x99ec76===void 0x0?void 0x0:_0x99ec76['followPointer'])&&(this['node']['classList']['add']('follow-tooltip'),this['target']?this['target']['addEventListener']('mousemove',this['follow']):document['addEventListener']('mousemove',this['follow'])),this['parentNode']['appendChild'](this['node']),!(_0x99ec76===null||_0x99ec76===void 0x0?void 0x0:_0x99ec76['showOnCreate'])&&this['node']['setAttribute']('hidden','');}['setContent'](_0x5e6f8f){this['node']['textContent']&&(this['node']['textContent']=null);for(let _0x5de6ed=0x0;_0x5de6ed<this['node']['children']['length'];++_0x5de6ed){const _0x3d4dd2=this['node']['children'][_0x5de6ed];this['node']['removeChild'](_0x3d4dd2);}this['node']['append'](_0x5e6f8f),this['node']['appendChild'](this['childNode']);}['updateChildContent'](_0x112eca){this['childNode']['textContent']&&(this['childNode']['textContent']=null);for(let _0x3beded=0x0;_0x3beded<this['node']['children']['length'];++_0x3beded){const _0x586997=this['node']['children'][_0x3beded];this['node']['removeChild'](_0x586997);}this['childNode']['append'](_0x112eca);}}

export { BasePanel, PopPanel, Tooltip };
