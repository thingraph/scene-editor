/**
    * @x-viewer/ui v0.8.0 build Mon Nov 10 2025
    * undefined
    * Copyright 2025 x-viewer
    * @license MIT
    */
import { THREE } from '@x-viewer/core';

function styleInject(_0x357636,_0xd239ba){if(_0xd239ba===void 0)_0xd239ba={};var _0x259507=_0xd239ba['insertAt'];if(!_0x357636||typeof document==='undefined')return;var _0x5ccf74=document['head']||document['getElementsByTagName']('head')[0x0],_0x7fdd80=document['createElement']('style');_0x7fdd80['type']='text/css',_0x259507==='top'?_0x5ccf74['firstChild']?_0x5ccf74['insertBefore'](_0x7fdd80,_0x5ccf74['firstChild']):_0x5ccf74['appendChild'](_0x7fdd80):_0x5ccf74['appendChild'](_0x7fdd80),_0x7fdd80['styleSheet']?_0x7fdd80['styleSheet']['cssText']=_0x357636:_0x7fdd80['appendChild'](document['createTextNode'](_0x357636));}

var css_248z$2 = ".base-panel{background-color:hsla(0,0%,100%,.9);border-radius:4px;box-shadow:1px 3px 10px 0 rgba(0,0,0,.4);color:#000;height:350px;max-height:90%;max-width:50%;min-height:40px;min-width:200px;overflow:hidden;position:absolute;resize:both;right:20px;top:30px;user-select:none;width:330px;z-index:2}.base-panel ::-webkit-scrollbar{width:6px}.base-panel ::-webkit-scrollbar-track{background:#e1e1e1;border-radius:1px}.base-panel ::-webkit-scrollbar-thumb{background:#888;border-radius:1px}.base-panel ::-webkit-scrollbar-thumb:hover{background:#555}.base-panel:hover{background-color:hsla(0,0%,100%,.95)}.base-panel input{background-color:#fff;border:1px solid #d9d9d9;box-shadow:0 2px 0 rgba(0,0,0,.02);color:rgba(0,0,0,.88);height:auto;padding:0 2px;transition:all .2s cubic-bezier(.645,.045,.355,1)}.base-panel input:hover{border-color:#4096ff;color:#4096ff}.base-panel input[type=button]{cursor:pointer;height:auto;padding:1px 10px;text-align:center;user-select:none;white-space:nowrap}.base-panel input[type=button]:hover{border-color:#4096ff;color:#4096ff;z-index:2}.base-panel input[type=text]{padding:0 2px}.base-panel input[type=color]{background-color:transparent;border:0;height:16px;overflow:hidden;padding:0;width:30px}.base-panel select{background-color:#fff;border:1px solid #d9d9d9;box-shadow:0 2px 0 rgba(0,0,0,.02);color:rgba(0,0,0,.88);cursor:pointer;height:auto;padding:1px 10px;text-align:center;transition:all .2s cubic-bezier(.645,.045,.355,1);user-select:none;white-space:nowrap}.base-panel select:hover{border-color:#4096ff;color:#4096ff;z-index:2}.base-panel ::-webkit-color-swatch{height:16px;margin-top:-5px;position:relative;width:40px}.base-panel .header{align-items:center;background-color:rgba(0,0,0,.133);border-bottom:1px solid #ccc;cursor:move;display:flex;font-size:16px;height:40px;padding-left:12px;width:100%}.base-panel .header .expander{cursor:pointer;font-family:cursive;opacity:.7;padding:10px;position:absolute;right:40px;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);transition:transform .05s ease;-moz-transition:transform .05s ease;-webkit-transition:transform .05s ease;vertical-align:middle}.base-panel .header .expander:hover{opacity:1}.base-panel .header .expander-collapsed{transform:rotate(90deg);-webkit-transform:rotate(90deg)}.base-panel .header .close{cursor:pointer;opacity:.7;padding:10px;position:absolute;right:8px}.base-panel .header .close:hover{opacity:1}.base-panel .content{height:calc(100% - 40px);overflow-x:hidden;overflow-y:auto;padding:5px}.base-panel .content .color-input{border:1px solid gray;cursor:pointer;font-size:0;height:20px;width:20px}.base-panel .content .color-input:hover{border:1px solid blue}";
styleInject(css_248z$2);

var css_248z$1 = ".pop-panel{background:#fff;border-radius:4px;box-shadow:0 12px 48px 16px rgba(0,0,0,.03),0 9px 28px 0 rgba(0,0,0,.05),0 6px 16px -8px rgba(0,0,0,.08);color:#333;left:calc(90% - 160px);position:absolute;top:calc(70% - 100px);width:160px;z-index:99999999}.pop-panel .pop-panel-header{border-bottom:1px solid #efefef;color:#333;cursor:move;font-size:16px;font-weight:bolder;padding:16px 24px 8px;user-select:none}.pop-panel .pop-panel-body{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:16px 24px}.pop-panel .pop-panel-body .pop-panel-item{cursor:pointer;display:inline-block;font-size:16px;margin-right:16px}.pop-panel .pop-panel-body .pop-panel-item .x-viewer-iconfont{font-size:24px}.pop-panel .pop-panel-body .pop-panel-item:last-child{margin-right:0}.pop-panel .pop-panel-body .pop-panel-item.active,.pop-panel .pop-panel-body .pop-panel-item:hover{color:#2c7be5}.pop-panel .pop-panel-body .pop-panel-item.disable{color:#999;cursor:not-allowed}";
styleInject(css_248z$1);

class BasePanel{constructor(_0x29878e){this['mouseDownPositionX']=-1,this['mouseDownPositionY']=-1,this['originalPanelHeight']=-1,this['onHide']=()=>{var _0x1d3daf;this['setVisible'](![]),(_0x1d3daf=this['onClose'])===null||_0x1d3daf===void 0?void 0:_0x1d3daf['call'](this);},this['onPointerDown']=_0x49fa8d=>{_0x49fa8d['target']['classList']['contains']('draggable')&&_0x49fa8d['button']===0x0&&(this['mouseDownPositionX']=_0x49fa8d['x'],this['mouseDownPositionY']=_0x49fa8d['y'],document['addEventListener']('pointermove',this['onPointerMove']),document['addEventListener']('pointerup',this['onPointerUp']));},this['onPointerMove']=_0x4a80e6=>{const _0x437527=this['root'],_0x2b9af6=_0x4a80e6['x']-this['mouseDownPositionX'],_0x40ecea=_0x4a80e6['y']-this['mouseDownPositionY'],_0x56408b=this['getPanelTransform']();let _0x3b44e8=_0x437527['offsetLeft']+_0x56408b['x']+_0x2b9af6,_0xdbd047=_0x437527['offsetTop']+_0x56408b['y']+_0x40ecea;const _0x1d5033=this['viewportContainer'];if(_0x1d5033){const _0x35a453=_0x1d5033['clientLeft']+_0x1d5033['clientWidth'],_0x50ca7e=_0x1d5033['clientTop']+_0x1d5033['clientHeight'];_0x3b44e8<0x0&&(_0x3b44e8=0x0),_0x3b44e8>0x0&&_0x3b44e8+_0x437527['clientWidth']>_0x35a453&&(_0x2b9af6>0x0&&(_0x3b44e8=_0x437527['offsetLeft']+_0x56408b['x'])),_0xdbd047<0x0&&(_0xdbd047=0x0),_0xdbd047>0x0&&_0xdbd047+_0x437527['clientHeight']>_0x50ca7e&&(_0x40ecea>0x0&&(_0xdbd047=_0x437527['offsetTop']+_0x56408b['y']));}_0x437527['style']['left']=_0x3b44e8-_0x56408b['x']+'px',_0x437527['style']['top']=_0xdbd047-_0x56408b['y']+'px',this['mouseDownPositionX']=_0x4a80e6['x'],this['mouseDownPositionY']=_0x4a80e6['y'];},this['onPointerUp']=()=>{document['removeEventListener']('pointermove',this['onPointerMove']),document['removeEventListener']('pointerup',this['onPointerUp']);};const {container:_0x17628a,title:_0x117319,cssClass:_0x453000,onClose:_0x1ef720,viewportContainer:_0x58e241}=_0x29878e;this['root']=document['createElement']('div'),this['root']['classList']['add']('base-panel');_0x453000&&this['root']['classList']['add'](_0x453000);this['header']=document['createElement']('div'),this['header']['classList']['add']('header','draggable');const _0x4f3ab3=document['createElement']('span');_0x4f3ab3['innerText']=_0x117319,_0x4f3ab3['classList']['add']('draggable'),this['closeBtn']=document['createElement']('span'),this['closeBtn']['classList']['add']('close'),this['closeBtn']['innerHTML']='âœ•',this['collapseBtn']=document['createElement']('span'),this['collapseBtn']['classList']['add']('expander'),this['collapseBtn']['innerHTML']='>',this['header']['appendChild'](_0x4f3ab3),this['header']['appendChild'](this['collapseBtn']),this['header']['appendChild'](this['closeBtn']),this['root']['appendChild'](this['header']),this['content']=document['createElement']('div'),this['content']['classList']['add']('content'),this['root']['appendChild'](this['content']),_0x17628a['appendChild'](this['root']),this['header']['addEventListener']('pointerdown',this['onPointerDown']),this['collapseBtn']['addEventListener']('click',_0xd4f3d1=>{_0xd4f3d1['stopPropagation']();const _0x5333d3=this['originalPanelHeight']>0x0;_0x5333d3?(this['collapseBtn']['classList']['remove']('expander-collapsed'),this['root']['style']['height']=this['originalPanelHeight']+'px',this['originalPanelHeight']=-1):(this['collapseBtn']['classList']['add']('expander-collapsed'),this['originalPanelHeight']=this['root']['clientHeight'],this['root']['style']['height']='0px');}),this['closeBtn']['addEventListener']('click',this['onHide']),_0x1ef720&&(this['onClose']=_0x1ef720),_0x58e241&&(this['viewportContainer']=_0x58e241);}['setVisible'](_0x1c16ae){this['root']['style']['display']=_0x1c16ae?'':'none';}['isVisible'](){return this['root']['style']['display']!=='none';}['setTitle'](_0xe7b698){this['header']['querySelector']('span.draggable')['innerText']=_0xe7b698;}['setContent'](_0x5f1a02){this['content']['innerHTML']=_0x5f1a02;}['destroy'](){this['header']['removeEventListener']('pointerdown',this['onPointerDown']),this['closeBtn']['removeEventListener']('click',this['onHide']);}['getPanelTransform'](){const _0x50cc21=window['getComputedStyle'](this['root']);let _0x595054=0x0,_0x5542d6=0x0;const _0xb5455a=_0x50cc21['transform'];if(_0xb5455a&&_0xb5455a['startsWith']('matrix')){const _0x149aad=_0xb5455a['match'](/matrix\([^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+)\)/);_0x149aad&&(_0x595054=parseFloat(_0x149aad[0x5]),_0x5542d6=parseFloat(_0x149aad[0x6]));}else {if(_0xb5455a&&_0xb5455a['startsWith']('translate')){const _0x1d2c61=_0xb5455a['match'](/translate\(([\d\.\-]+)px,\s*([\d\.\-]+)px\)/);_0x1d2c61&&(_0x595054=parseFloat(_0x1d2c61[0x1]),_0x5542d6=parseFloat(_0x1d2c61[0x2]));}}return new THREE['Vector2'](_0x595054,_0x5542d6);}}

class PopPanel{constructor(_0x4d6343,_0x5a1b91,_0x586f31=document['body']){this['container']=_0x586f31,this['isFollowing']=![],this['diffX']=0x0,this['diffY']=0x0,this['start']=_0x3f7342=>{this['isFollowing']=!![],this['diffX']=_0x3f7342['clientX']-this['element']['offsetLeft'],this['diffY']=_0x3f7342['clientY']-this['element']['offsetTop'];},this['stop']=()=>{this['isFollowing']=![];},this['follow']=_0x426889=>{if(!this['isFollowing'])return;const _0x5d4003=_0x426889['clientX']-this['diffX'],_0x47812d=_0x426889['clientY']-this['diffY'];this['element']['style']['left']=_0x5d4003+'px',this['element']['style']['top']=_0x47812d+'px';},this['element']=document['createElement']('div'),this['element']['id']=_0x4d6343,this['element']['classList']['add']('pop-panel');const _0x3421fb=document['createElement']('div');_0x3421fb['classList']['add']('pop-panel-header'),_0x3421fb['append'](_0x5a1b91),this['element']['appendChild'](_0x3421fb),this['header']=_0x3421fb;const _0x2a6c77=document['createElement']('div');_0x2a6c77['classList']['add']('pop-panel-body'),this['element']['appendChild'](_0x2a6c77),this['body']=_0x2a6c77,_0x3421fb['addEventListener']('mousedown',this['start']),_0x3421fb['addEventListener']('mouseup',this['stop']),document['body']['addEventListener']('mousemove',this['follow']),this['container']['appendChild'](this['element']);}['destroy'](){document['body']['removeEventListener']('mousemove',this['follow']),this['element']['removeEventListener']('mousedown',this['start']),this['element']['removeEventListener']('mouseup',this['stop']),this['element']['remove']();}}

var css_248z = ".follow-tooltip{background:rgba(25,25,25,.3);border-radius:2px;color:hsla(0,0%,100%,.8);font-size:12px;left:-500px;padding:6px;position:absolute;z-index:99999999}";
styleInject(css_248z);

class Tooltip{constructor(_0x7ceec0,_0x49eff8,_0x308b6e){this['follow']=_0x270e64=>{this['node']['style']['left']=_0x270e64['offsetX']+0xf+'px',this['node']['style']['top']=_0x270e64['offsetY']-0x1e+'px';},this['show']=()=>this['node']['hasAttribute']('hidden')&&this['node']['removeAttribute']('hidden'),this['hide']=()=>!this['node']['hasAttribute']('hidden')&&this['node']['setAttribute']('hidden',''),this['destroy']=()=>{this['target']?this['target']['removeEventListener']('mousemove',this['follow']):document['removeEventListener']('mousemove',this['follow']),this['parentNode']['removeChild'](this['node']);},this['node']=document['createElement']('div'),this['node']['id']=_0x7ceec0,_0x49eff8&&this['node']['append'](_0x49eff8),this['childNode']=document['createElement']('div'),this['target']=_0x308b6e===null||_0x308b6e===void 0?void 0:_0x308b6e['target'],this['parentNode']=(_0x308b6e===null||_0x308b6e===void 0?void 0:_0x308b6e['parentNode'])||document['body'],(_0x308b6e===null||_0x308b6e===void 0?void 0:_0x308b6e['followPointer'])&&(this['node']['classList']['add']('follow-tooltip'),this['target']?this['target']['addEventListener']('mousemove',this['follow']):document['addEventListener']('mousemove',this['follow'])),this['parentNode']['appendChild'](this['node']),!(_0x308b6e===null||_0x308b6e===void 0?void 0:_0x308b6e['showOnCreate'])&&this['node']['setAttribute']('hidden','');}['setContent'](_0x4529b4){this['node']['textContent']&&(this['node']['textContent']=null);for(let _0x4b88fd=0x0;_0x4b88fd<this['node']['children']['length'];++_0x4b88fd){const _0x4a42e3=this['node']['children'][_0x4b88fd];this['node']['removeChild'](_0x4a42e3);}this['node']['append'](_0x4529b4),this['node']['appendChild'](this['childNode']);}['updateChildContent'](_0x586a85){this['childNode']['textContent']&&(this['childNode']['textContent']=null);for(let _0x43614a=0x0;_0x43614a<this['node']['children']['length'];++_0x43614a){const _0x280ad6=this['node']['children'][_0x43614a];this['node']['removeChild'](_0x280ad6);}this['childNode']['append'](_0x586a85);}}

export { BasePanel, PopPanel, Tooltip };
