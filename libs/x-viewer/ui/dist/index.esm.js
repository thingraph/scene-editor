/**
    * @x-viewer/ui v0.8.0 build Mon Nov 24 2025
    * undefined
    * Copyright 2025 x-viewer
    * @license MIT
    */
import { THREE } from '@x-viewer/core';

function styleInject(_0x37aba7,_0x290dd7){if(_0x290dd7===void 0x0)_0x290dd7={};var _0x5d0ba6=_0x290dd7['insertAt'];if(!_0x37aba7||typeof document==='undefined')return;var _0x194b08=document['head']||document['getElementsByTagName']('head')[0x0],_0x3f2530=document['createElement']('style');_0x3f2530['type']='text/css',_0x5d0ba6==='top'?_0x194b08['firstChild']?_0x194b08['insertBefore'](_0x3f2530,_0x194b08['firstChild']):_0x194b08['appendChild'](_0x3f2530):_0x194b08['appendChild'](_0x3f2530),_0x3f2530['styleSheet']?_0x3f2530['styleSheet']['cssText']=_0x37aba7:_0x3f2530['appendChild'](document['createTextNode'](_0x37aba7));}

var css_248z$2 = ".base-panel{background-color:hsla(0,0%,100%,.9);border-radius:4px;box-shadow:1px 3px 10px 0 rgba(0,0,0,.4);color:#000;height:350px;max-height:90%;max-width:50%;min-height:40px;min-width:200px;overflow:hidden;position:absolute;resize:both;right:20px;top:30px;user-select:none;width:330px;z-index:2}.base-panel ::-webkit-scrollbar{width:6px}.base-panel ::-webkit-scrollbar-track{background:#e1e1e1;border-radius:1px}.base-panel ::-webkit-scrollbar-thumb{background:#888;border-radius:1px}.base-panel ::-webkit-scrollbar-thumb:hover{background:#555}.base-panel:hover{background-color:hsla(0,0%,100%,.95)}.base-panel input{background-color:#fff;border:1px solid #d9d9d9;box-shadow:0 2px 0 rgba(0,0,0,.02);color:rgba(0,0,0,.88);height:auto;padding:0 2px;transition:all .2s cubic-bezier(.645,.045,.355,1)}.base-panel input:hover{border-color:#4096ff;color:#4096ff}.base-panel input[type=button]{cursor:pointer;height:auto;padding:1px 10px;text-align:center;user-select:none;white-space:nowrap}.base-panel input[type=button]:hover{border-color:#4096ff;color:#4096ff;z-index:2}.base-panel input[type=text]{padding:0 2px}.base-panel input[type=color]{background-color:transparent;border:0;height:16px;overflow:hidden;padding:0;width:30px}.base-panel select{background-color:#fff;border:1px solid #d9d9d9;box-shadow:0 2px 0 rgba(0,0,0,.02);color:rgba(0,0,0,.88);cursor:pointer;height:auto;padding:1px 10px;text-align:center;transition:all .2s cubic-bezier(.645,.045,.355,1);user-select:none;white-space:nowrap}.base-panel select:hover{border-color:#4096ff;color:#4096ff;z-index:2}.base-panel ::-webkit-color-swatch{height:16px;margin-top:-5px;position:relative;width:40px}.base-panel .header{align-items:center;background-color:rgba(0,0,0,.133);border-bottom:1px solid #ccc;cursor:move;display:flex;font-size:16px;height:40px;padding-left:12px;width:100%}.base-panel .header .expander{cursor:pointer;font-family:cursive;opacity:.7;padding:10px;position:absolute;right:40px;transform:rotate(-90deg);-webkit-transform:rotate(-90deg);transition:transform .05s ease;-moz-transition:transform .05s ease;-webkit-transition:transform .05s ease;vertical-align:middle}.base-panel .header .expander:hover{opacity:1}.base-panel .header .expander-collapsed{transform:rotate(90deg);-webkit-transform:rotate(90deg)}.base-panel .header .close{cursor:pointer;opacity:.7;padding:10px;position:absolute;right:8px}.base-panel .header .close:hover{opacity:1}.base-panel .content{height:calc(100% - 40px);overflow-x:hidden;overflow-y:auto;padding:5px}.base-panel .content .color-input{border:1px solid gray;cursor:pointer;font-size:0;height:20px;width:20px}.base-panel .content .color-input:hover{border:1px solid blue}";
styleInject(css_248z$2);

var css_248z$1 = ".pop-panel{background:#fff;border-radius:4px;box-shadow:0 12px 48px 16px rgba(0,0,0,.03),0 9px 28px 0 rgba(0,0,0,.05),0 6px 16px -8px rgba(0,0,0,.08);color:#333;left:calc(90% - 160px);position:absolute;top:calc(70% - 100px);width:160px;z-index:99999999}.pop-panel .pop-panel-header{border-bottom:1px solid #efefef;color:#333;cursor:move;font-size:16px;font-weight:bolder;padding:16px 24px 8px;user-select:none}.pop-panel .pop-panel-body{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:16px 24px}.pop-panel .pop-panel-body .pop-panel-item{cursor:pointer;display:inline-block;font-size:16px;margin-right:16px}.pop-panel .pop-panel-body .pop-panel-item .x-viewer-iconfont{font-size:24px}.pop-panel .pop-panel-body .pop-panel-item:last-child{margin-right:0}.pop-panel .pop-panel-body .pop-panel-item.active,.pop-panel .pop-panel-body .pop-panel-item:hover{color:#2c7be5}.pop-panel .pop-panel-body .pop-panel-item.disable{color:#999;cursor:not-allowed}";
styleInject(css_248z$1);

class BasePanel{constructor(_0xd8002e){this['mouseDownPositionX']=-0x1,this['mouseDownPositionY']=-0x1,this['originalPanelHeight']=-0x1,this['onHide']=()=>{var _0x21e8d6;this['setVisible'](![]),(_0x21e8d6=this['onClose'])===null||_0x21e8d6===void 0x0?void 0x0:_0x21e8d6['call'](this);},this['onPointerDown']=_0x1c148c=>{_0x1c148c['target']['classList']['contains']('draggable')&&_0x1c148c['button']===0x0&&(this['mouseDownPositionX']=_0x1c148c['x'],this['mouseDownPositionY']=_0x1c148c['y'],document['addEventListener']('pointermove',this['onPointerMove']),document['addEventListener']('pointerup',this['onPointerUp']));},this['onPointerMove']=_0x352787=>{const _0x966b16=this['root'],_0x5f0c65=_0x352787['x']-this['mouseDownPositionX'],_0x45e823=_0x352787['y']-this['mouseDownPositionY'],_0x4ed209=this['getPanelTransform']();let _0x164c07=_0x966b16['offsetLeft']+_0x4ed209['x']+_0x5f0c65,_0x340270=_0x966b16['offsetTop']+_0x4ed209['y']+_0x45e823;const _0x1b3565=this['viewportContainer'];if(_0x1b3565){const _0x34b123=_0x1b3565['clientLeft']+_0x1b3565['clientWidth'],_0x22f3ec=_0x1b3565['clientTop']+_0x1b3565['clientHeight'];_0x164c07<0x0&&(_0x164c07=0x0),_0x164c07>0x0&&_0x164c07+_0x966b16['clientWidth']>_0x34b123&&(_0x5f0c65>0x0&&(_0x164c07=_0x966b16['offsetLeft']+_0x4ed209['x'])),_0x340270<0x0&&(_0x340270=0x0),_0x340270>0x0&&_0x340270+_0x966b16['clientHeight']>_0x22f3ec&&(_0x45e823>0x0&&(_0x340270=_0x966b16['offsetTop']+_0x4ed209['y']));}_0x966b16['style']['left']=_0x164c07-_0x4ed209['x']+'px',_0x966b16['style']['top']=_0x340270-_0x4ed209['y']+'px',this['mouseDownPositionX']=_0x352787['x'],this['mouseDownPositionY']=_0x352787['y'];},this['onPointerUp']=()=>{document['removeEventListener']('pointermove',this['onPointerMove']),document['removeEventListener']('pointerup',this['onPointerUp']);};const {container:_0x474b23,title:_0x15699d,cssClass:_0x1046ba,onClose:_0x34b5d0,viewportContainer:_0x39e508}=_0xd8002e;this['root']=document['createElement']('div'),this['root']['classList']['add']('base-panel');_0x1046ba&&this['root']['classList']['add'](_0x1046ba);this['header']=document['createElement']('div'),this['header']['classList']['add']('header','draggable');const _0x4f0a65=document['createElement']('span');_0x4f0a65['innerText']=_0x15699d,_0x4f0a65['classList']['add']('draggable'),this['closeBtn']=document['createElement']('span'),this['closeBtn']['classList']['add']('close'),this['closeBtn']['innerHTML']='âœ•',this['collapseBtn']=document['createElement']('span'),this['collapseBtn']['classList']['add']('expander'),this['collapseBtn']['innerHTML']='>',this['header']['appendChild'](_0x4f0a65),this['header']['appendChild'](this['collapseBtn']),this['header']['appendChild'](this['closeBtn']),this['root']['appendChild'](this['header']),this['content']=document['createElement']('div'),this['content']['classList']['add']('content'),this['root']['appendChild'](this['content']),_0x474b23['appendChild'](this['root']),this['header']['addEventListener']('pointerdown',this['onPointerDown']),this['collapseBtn']['addEventListener']('click',_0x44ee78=>{_0x44ee78['stopPropagation']();const _0x478c3a=this['originalPanelHeight']>0x0;_0x478c3a?(this['collapseBtn']['classList']['remove']('expander-collapsed'),this['root']['style']['height']=this['originalPanelHeight']+'px',this['originalPanelHeight']=-0x1):(this['collapseBtn']['classList']['add']('expander-collapsed'),this['originalPanelHeight']=this['root']['clientHeight'],this['root']['style']['height']='0px');}),this['closeBtn']['addEventListener']('click',this['onHide']),_0x34b5d0&&(this['onClose']=_0x34b5d0),_0x39e508&&(this['viewportContainer']=_0x39e508);}['setVisible'](_0x401e31){this['root']['style']['display']=_0x401e31?'':'none';}['isVisible'](){return this['root']['style']['display']!=='none';}['setTitle'](_0x26630a){this['header']['querySelector']('span.draggable')['innerText']=_0x26630a;}['setContent'](_0x4c9201){this['content']['innerHTML']=_0x4c9201;}['destroy'](){this['header']['removeEventListener']('pointerdown',this['onPointerDown']),this['closeBtn']['removeEventListener']('click',this['onHide']);}['getPanelTransform'](){const _0x4dce8e=window['getComputedStyle'](this['root']);let _0xe74723=0x0,_0x67a7a1=0x0;const _0x54b1da=_0x4dce8e['transform'];if(_0x54b1da&&_0x54b1da['startsWith']('matrix')){const _0x78dbd8=_0x54b1da['match'](/matrix\([^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+),[^\d\-]*([\d\.\-]+)\)/);_0x78dbd8&&(_0xe74723=parseFloat(_0x78dbd8[0x5]),_0x67a7a1=parseFloat(_0x78dbd8[0x6]));}else {if(_0x54b1da&&_0x54b1da['startsWith']('translate')){const _0x47e23a=_0x54b1da['match'](/translate\(([\d\.\-]+)px,\s*([\d\.\-]+)px\)/);_0x47e23a&&(_0xe74723=parseFloat(_0x47e23a[0x1]),_0x67a7a1=parseFloat(_0x47e23a[0x2]));}}return new THREE['Vector2'](_0xe74723,_0x67a7a1);}}

class PopPanel{constructor(_0x2b3ab2,_0x329f6f,_0x532082=document['body']){this['container']=_0x532082,this['isFollowing']=![],this['diffX']=0x0,this['diffY']=0x0,this['start']=_0x7edd39=>{this['isFollowing']=!![],this['diffX']=_0x7edd39['clientX']-this['element']['offsetLeft'],this['diffY']=_0x7edd39['clientY']-this['element']['offsetTop'];},this['stop']=()=>{this['isFollowing']=![];},this['follow']=_0x5151cc=>{if(!this['isFollowing'])return;const _0x13e3aa=_0x5151cc['clientX']-this['diffX'],_0x1d9efa=_0x5151cc['clientY']-this['diffY'];this['element']['style']['left']=_0x13e3aa+'px',this['element']['style']['top']=_0x1d9efa+'px';},this['element']=document['createElement']('div'),this['element']['id']=_0x2b3ab2,this['element']['classList']['add']('pop-panel');const _0x109251=document['createElement']('div');_0x109251['classList']['add']('pop-panel-header'),_0x109251['append'](_0x329f6f),this['element']['appendChild'](_0x109251),this['header']=_0x109251;const _0x3b9fe8=document['createElement']('div');_0x3b9fe8['classList']['add']('pop-panel-body'),this['element']['appendChild'](_0x3b9fe8),this['body']=_0x3b9fe8,_0x109251['addEventListener']('mousedown',this['start']),_0x109251['addEventListener']('mouseup',this['stop']),document['body']['addEventListener']('mousemove',this['follow']),this['container']['appendChild'](this['element']);}['destroy'](){document['body']['removeEventListener']('mousemove',this['follow']),this['element']['removeEventListener']('mousedown',this['start']),this['element']['removeEventListener']('mouseup',this['stop']),this['element']['remove']();}}

var css_248z = ".follow-tooltip{background:rgba(25,25,25,.3);border-radius:2px;color:hsla(0,0%,100%,.8);font-size:12px;left:-500px;padding:6px;position:absolute;z-index:99999999}";
styleInject(css_248z);

class Tooltip{constructor(_0x18088b,_0x563c8a,_0xf138af){this['follow']=_0x5962c2=>{this['node']['style']['left']=_0x5962c2['offsetX']+0xf+'px',this['node']['style']['top']=_0x5962c2['offsetY']-0x1e+'px';},this['show']=()=>this['node']['hasAttribute']('hidden')&&this['node']['removeAttribute']('hidden'),this['hide']=()=>!this['node']['hasAttribute']('hidden')&&this['node']['setAttribute']('hidden',''),this['destroy']=()=>{this['target']?this['target']['removeEventListener']('mousemove',this['follow']):document['removeEventListener']('mousemove',this['follow']),this['parentNode']['removeChild'](this['node']);},this['node']=document['createElement']('div'),this['node']['id']=_0x18088b,_0x563c8a&&this['node']['append'](_0x563c8a),this['childNode']=document['createElement']('div'),this['target']=_0xf138af===null||_0xf138af===void 0x0?void 0x0:_0xf138af['target'],this['parentNode']=(_0xf138af===null||_0xf138af===void 0x0?void 0x0:_0xf138af['parentNode'])||document['body'],(_0xf138af===null||_0xf138af===void 0x0?void 0x0:_0xf138af['followPointer'])&&(this['node']['classList']['add']('follow-tooltip'),this['target']?this['target']['addEventListener']('mousemove',this['follow']):document['addEventListener']('mousemove',this['follow'])),this['parentNode']['appendChild'](this['node']),!(_0xf138af===null||_0xf138af===void 0x0?void 0x0:_0xf138af['showOnCreate'])&&this['node']['setAttribute']('hidden','');}['setContent'](_0xfa7aca){this['node']['textContent']&&(this['node']['textContent']=null);for(let _0x14d0f7=0x0;_0x14d0f7<this['node']['children']['length'];++_0x14d0f7){const _0x28e494=this['node']['children'][_0x14d0f7];this['node']['removeChild'](_0x28e494);}this['node']['append'](_0xfa7aca),this['node']['appendChild'](this['childNode']);}['updateChildContent'](_0x6f635a){this['childNode']['textContent']&&(this['childNode']['textContent']=null);for(let _0x4e025d=0x0;_0x4e025d<this['node']['children']['length'];++_0x4e025d){const _0x270e1b=this['node']['children'][_0x4e025d];this['node']['removeChild'](_0x270e1b);}this['childNode']['append'](_0x6f635a);}}

export { BasePanel, PopPanel, Tooltip };
